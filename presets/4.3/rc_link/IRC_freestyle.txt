#$ TITLE: IRC Ghost Freestyle
#$ FIRMWARE_VERSION: 4.3
#$ CATEGORY: RC_LINK
#$ STATUS: EXPERIMENTAL
#$ KEYWORDS: rc link,rc smoothing, ghost, IRC, GHST, 55hz, 160hz, 250Hz, 500Hz, freestyle, purerace, soild250, race250, race500, race, normal, immersionRC, immersion
#$ AUTHOR: sugarK
#$ DESCRIPTION: Setup for the various ImmersionRC modes via GHST protocol for freestyle.
#$ DESCRIPTION: WARNING: Make ABSOLUTELY SURE that the Hardware > ADC Filter is un-checked! and both radio and the TX unit are all up-to-date with the latest EdgeTX, OpenTX or FreedomTX.
#$ INCLUDE_WARNING: misc/warnings/en/ADC.txt
#$ INCLUDE: presets/4.3/rc_link/defaults.txt
#$ DISCUSSION: https://github.com/betaflight/firmware-presets/pull/156
#$ FORCE_OPTIONS_REVIEW: TRUE

feature RX_SERIAL
set serialrx_provider = GHST

# We do not recommend disabling rc smoothing.
set rc_smoothing = ON

#$ OPTION_GROUP BEGIN: 250-300Hz SoildRace, Race250 and PureRace modes

#$ OPTION BEGIN (UNCHECKED): Select for 250-300Hz modes then add additional options 

set feedforward_averaging = 2_POINT
set feedforward_smooth_factor = 45
set feedforward_jitter_factor = 8
set rc_smoothing_auto_factor = 52
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): Sharper

set feedforward_jitter_factor = 6
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): HD Freestyle
set feedforward_smooth_factor = 45
set feedforward_jitter_factor = 10
set rc_smoothing_auto_factor = 140
set rc_smoothing_setpoint_cutoff = 25
set rc_smoothing_feedforward_cutoff = 25
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): Cinematic
set feedforward_smooth_factor = 60
set feedforward_jitter_factor = 12
set rc_smoothing_auto_factor = 250  
set rc_smoothing_auto_factor_throttle = 170
set rc_smoothing_setpoint_cutoff = 12
set rc_smoothing_feedforward_cutoff = 12
set rc_smoothing_throttle_cutoff = 20
#$ OPTION END
#$ OPTION_GROUP END

#$ OPTION_GROUP BEGIN: 500Hz Race500 mode
#$ OPTION BEGIN (UNCHECKED): Select for 500Hz mode then add additional options 

set feedforward_averaging = 2_POINT
set feedforward_smooth_factor = 65
set feedforward_jitter_factor = 7
set rc_smoothing_auto_factor = 120
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): Sharper

set feedforward_jitter_factor = 5
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): HD Freestyle
set feedforward_smooth_factor = 65
set feedforward_jitter_factor = 9
set rc_smoothing_auto_factor = 250
set rc_smoothing_setpoint_cutoff = 25
set rc_smoothing_feedforward_cutoff = 25
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): Cinematic
set feedforward_smooth_factor = 70
set feedforward_jitter_factor = 11
set rc_smoothing_auto_factor = 250
set rc_smoothing_auto_factor_throttle = 250
set rc_smoothing_setpoint_cutoff = 12
set rc_smoothing_feedforward_cutoff = 12
set rc_smoothing_throttle_cutoff = 20
#$ OPTION END
#$ OPTION_GROUP END

#$ OPTION_GROUP BEGIN: 160Hz race mode
#$ OPTION BEGIN (UNCHECKED): Select for 160Hz mode then add additional options

set feedforward_averaging = OFF
set feedforward_smooth_factor = 30
set feedforward_jitter_factor = 7
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): Sharper
set feedforward_smooth_factor = 25
set feedforward_jitter_factor = 5
set rc_smoothing_auto_factor = 25
set rc_smoothing_auto_factor_throttle = 25
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): HD Freestyle
set feedforward_smooth_factor = 30
set feedforward_jitter_factor = 10
set rc_smoothing_auto_factor = 80
set rc_smoothing_setpoint_cutoff = 25
set rc_smoothing_feedforward_cutoff = 25
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): Cinematic
set feedforward_smooth_factor = 35
set feedforward_jitter_factor = 12
set rc_smoothing_auto_factor = 175
set rc_smoothing_auto_factor_throttle = 100
set rc_smoothing_setpoint_cutoff = 12
set rc_smoothing_feedforward_cutoff = 12
set rc_smoothing_throttle_cutoff = 20
#$ OPTION END
#$ OPTION_GROUP END

#$ OPTION_GROUP BEGIN: 55Hz Normal mode 
#$ OPTION BEGIN (UNCHECKED): Select for 55Hz mode then add additional options

set feedforward_averaging = OFF
set feedforward_smooth_factor = 0
set feedforward_jitter_factor = 12
set feedforward_boost = 10
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): Sharper

set feedforward_jitter_factor = 7
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): HD Freestyle
set feedforward_jitter_factor = 15
set rc_smoothing_auto_factor = 20
set rc_smoothing_setpoint_cutoff = 25
set rc_smoothing_feedforward_cutoff = 25
#$ OPTION END

#$ OPTION BEGIN (UNCHECKED): Cinematic
set feedforward_smooth_factor = 20
set feedforward_jitter_factor = 15
set rc_smoothing_auto_factor = 35   
set rc_smoothing_auto_factor_throttle = 28
set rc_smoothing_setpoint_cutoff = 12
set rc_smoothing_feedforward_cutoff = 12
set rc_smoothing_throttle_cutoff = 20
#$ OPTION END
#$ OPTION_GROUP END